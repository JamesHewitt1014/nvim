local MiniPick = require('mini.pick')
local MiniExtra = require('mini.extra')

MiniExtra.setup()

MiniPick.setup({
	mappings = {
		choose_in_vsplit = '<C-s>', -- Vertical split
		paste = '<C-v>',
		scroll_down = '<C-j>',
		scroll_up = '<C-k>',
		scroll_left = '<C-h>',
		scroll_right = '<C-l>',
		refine = '<C-Space>'

		--Disable
		choose_in_split = '', -- Horizontal split
		choose_in_tabpage = '',
		choose_marked = '',
		refine_marked = '',
		mark = '',
		mark_all = '',
		-- toggle_info = '',
		-- toggle_preview = '',
		-- move_down = '',
		-- move_up = '',
		-- stop = '<C-q>'
	}
})

-- Replace standard vim ui select with mini.pick
vim.ui.select = MiniPick.ui_select

-- Pickers
FindFile = function() MiniPick.builtin.files({tool='fd'}) end

GrepFiles = function() MiniPick.builtin.grep_live({tool='rg'}) end

SearchHelp = function() MiniPick.builtin.help() end

RecentFiles = function() MiniExtra.pickers.oldfiles() end

GoToDeclaration = function()
	MiniExtra.pickers.lsp({scope='declaration'})
end

GoToImplementation = function()
	MiniExtra.pickers.lsp({scope='implementation'})
end

GoToTypeDefinition = function()
	MiniExtra.pickers.lsp({scope='type_definition'})
end

GoToReferences = function()
	MiniExtra.pickers.lsp({scope='references'})
end

ListSymbols = function()
	MiniExtra.pickers.lsp({scope='document_symbol'})
end

local SearchOptions = function() MiniExtra.pickers.options() end

function My_custom_picker()
  vim.ui.select({ "Option 1", "Option 2", "Option 3" }, {
    prompt = "Choose an option:",
  }, function(choice)
    print("You picked: " .. (choice or "nothing"))
  end)
end
